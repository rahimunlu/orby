(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{1e3:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(4540),n=s(9952),l=s(4465),i=s(1726),c=s(490),r=s(4876);function o(){let[e,t]=(0,n.useState)("MY_QR"),[s]=(0,n.useState)("0x1234...5678"),[o,d]=(0,n.useState)(!1),[x,f]=(0,n.useState)(null),h=(0,n.useRef)(null),u=async()=>{if(h.current){try{await h.current.stop(),h.current.clear()}catch(e){console.error("Error stopping camera:",e)}h.current=null}},m=async()=>{d(!0),f(null),setTimeout(async()=>{try{let e=new r.j9("qr-reader");h.current=e,await e.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},e=>{f(e),u()},()=>{})}catch(e){console.error("Camera error:",e),d(!1)}},100)};return((0,n.useEffect)(()=>()=>{u()},[]),"SCAN"!==e||o)?"SCAN"===e&&o?(0,a.jsx)(l.A,{hideNav:!0,children:(0,a.jsxs)("div",{className:"min-h-screen bg-black relative flex flex-col",children:[(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center relative",children:x?(0,a.jsxs)("div",{className:"text-center p-6",children:[(0,a.jsx)("p",{className:"text-green-400 font-bold text-lg mb-4",children:"QR Code Scanned!"}),(0,a.jsx)("p",{className:"text-white font-mono text-sm bg-zinc-800 p-4 rounded-xl break-all",children:x})]}):(0,a.jsx)("div",{id:"qr-reader",className:"w-full max-w-sm"})}),(0,a.jsx)("button",{onClick:async()=>{await u(),t("MY_QR"),d(!1),f(null)},className:"absolute bottom-12 left-1/2 transform -translate-x-1/2 text-white font-bold bg-zinc-800/80 px-6 py-3 rounded-full backdrop-blur font-sans hover:bg-zinc-700 transition-colors",children:"Close Camera"})]})}):(0,a.jsx)(l.A,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-orby flex flex-col items-center px-6 pt-6 pb-32",children:[(0,a.jsxs)("div",{className:"w-full flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-black tracking-tighter lowercase italic text-white",children:"orby"}),(0,a.jsx)("span",{className:"text-white/80 font-bold text-sm tracking-wide uppercase font-sans",children:"Scan or share"})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center w-full max-w-sm",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[40px] shadow-2xl w-full aspect-square flex flex-col items-center justify-center mb-8 animate-scale-in",children:[(0,a.jsxs)("div",{className:"w-full h-full bg-zinc-100 rounded-2xl flex items-center justify-center overflow-hidden relative",children:[(0,a.jsx)("div",{className:"absolute inset-4 grid grid-cols-6 grid-rows-6 gap-2 opacity-10",children:Array.from({length:36}).map((e,t)=>(0,a.jsx)("div",{className:"rounded-sm ".concat(Math.random()>.5?"bg-black":"bg-transparent")},t))}),(0,a.jsx)(i.A,{size:120,className:"text-black z-10"})]}),(0,a.jsx)("div",{className:"mt-4 font-mono text-zinc-500 font-bold tracking-widest bg-zinc-100 px-4 py-2 rounded-full text-xs",children:s})]}),(0,a.jsxs)("div",{className:"flex gap-2 bg-white p-1.5 rounded-full w-full max-w-[280px] shadow-lg animate-fade-in-up delay-200",children:[(0,a.jsx)("button",{onClick:()=>t("MY_QR"),className:"flex-1 py-3 rounded-full font-bold text-sm transition-all font-sans ".concat("MY_QR"===e?"bg-black text-white shadow-lg":"text-zinc-400 hover:text-zinc-600"),children:"My QR"}),(0,a.jsxs)("button",{onClick:()=>{t("SCAN")},className:"flex-1 py-3 rounded-full font-bold text-sm transition-all flex items-center justify-center gap-2 font-sans ".concat("SCAN"===e?"bg-black text-white shadow-lg":"text-zinc-400 hover:text-zinc-600"),children:[(0,a.jsx)(c.A,{size:16})," Scan"]})]})]})]})}):(0,a.jsx)(l.A,{hideNav:!0,children:(0,a.jsxs)("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center px-8 text-center relative animate-fade-in",children:[(0,a.jsxs)("h2",{className:"text-5xl font-display font-black text-white mb-16 leading-[0.9] tracking-tight",children:["Allow camera",(0,a.jsx)("br",{}),"access"]}),(0,a.jsx)("button",{onClick:m,className:"w-48 h-48 rounded-full bg-orby text-white font-display font-bold text-2xl hover:scale-105 active:scale-95 transition-transform shadow-[0_0_40px_rgba(40,80,255,0.3)] flex items-center justify-center tracking-tight",children:"Continue"}),(0,a.jsx)("button",{onClick:()=>t("MY_QR"),className:"absolute bottom-12 text-zinc-500 hover:text-white font-medium font-sans tracking-wide uppercase text-sm",children:"Cancel"})]})})}},1238:(e,t,s)=>{Promise.resolve().then(s.bind(s,1e3))},4465:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var a=s(4540),n=s(9952),l=s(2775),i=s(6879),c=s(1726),r=s(4422),o=s(2262),d=s(1288),x=function(e){return e.WALLET="WALLET",e.ACTIVITY="ACTIVITY",e.MENU="MENU",e.QR="QR",e}({});let f=[{id:x.QR,icon:c.A,label:"QR",path:"/qr"},{id:x.WALLET,icon:r.A,label:"WALLET",path:"/wallet"},{id:x.ACTIVITY,icon:o.A,label:"ACTIVITY",path:"/activity"},{id:x.MENU,icon:d.A,label:"MENU",path:"/menu"}];function h(){let e=(0,i.useRouter)(),t=(0,i.usePathname)(),s="/wallet"===t||"/"===t?x.WALLET:"/activity"===t?x.ACTIVITY:"/menu"===t?x.MENU:"/qr"===t?x.QR:x.WALLET;return(0,a.jsx)("div",{className:"fixed bottom-6 left-0 w-full flex justify-center z-50 pointer-events-none",children:(0,a.jsx)("div",{className:"w-[92%] max-w-md pointer-events-auto animate-fade-in-up delay-400",children:(0,a.jsx)("div",{className:"flex items-center justify-between bg-zinc-950/90 backdrop-blur-xl border border-white/10 rounded-full px-2 py-2 shadow-2xl ring-1 ring-white/5",children:f.map(t=>{let n=s===t.id,l=t.icon;return(0,a.jsxs)("button",{onClick:()=>e.push(t.path),className:"flex items-center gap-2 px-5 py-3 rounded-full transition-all duration-300 ".concat(n?"bg-orby text-white shadow-[0_0_15px_rgba(40,80,255,0.5)] font-bold":"text-zinc-500 hover:text-white"),children:[(0,a.jsx)(l,{size:20,strokeWidth:n?2.5:2}),n&&(0,a.jsx)("span",{className:"text-xs tracking-wider font-sans",children:t.label})]},t.id)})})})})}var u=s(9573);function m(e){let{children:t,hideNav:s=!1,bgClass:i="bg-orby-dark",showVaultLink:c=!0}=e,[r,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{c&&u.F.getFestival().then(o).catch(console.error)},[c]),(0,a.jsxs)("div",{className:"relative min-h-screen w-full overflow-hidden flex flex-col text-white ".concat(i),children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto pb-32 no-scrollbar",children:t}),c&&(null==r?void 0:r.vaultAddress)&&(0,a.jsx)("div",{className:"fixed bottom-24 left-0 w-full flex justify-center z-40 pointer-events-none",children:(0,a.jsxs)("a",{href:"".concat("https://sepolia.etherscan.io/address/").concat(r.vaultAddress),target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto flex items-center gap-1.5 px-3 py-1.5 bg-black/60 backdrop-blur-md rounded-full text-xs text-white/50 hover:text-white/80 border border-white/10 transition-colors",children:[(0,a.jsx)(l.A,{size:10}),"Vault: ",r.vaultAddress.slice(0,6),"...",r.vaultAddress.slice(-4)]})}),!s&&(0,a.jsx)(h,{})]})}},9573:(e,t,s)=>{"use strict";s.d(t,{F:()=>n});let a=s(4101).env.NEXT_PUBLIC_API_URL||"",n={getFestival:async()=>{let e=await fetch("".concat(a,"/api/admin/festival"));return e.ok?e.json():null},createFestival:async e=>(await fetch("".concat(a,"/api/admin/create-festival"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),join:async e=>(await fetch("".concat(a,"/api/festival/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nickname:e})})).json(),getBalances:async(e,t,s)=>(await fetch("".concat(a,"/api/festival/balances?userId=").concat(e,"&sessionToken=").concat(t,"&userAddress=").concat(s))).json(),topUp:async e=>(await fetch("".concat(a,"/api/festival/topup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),cashOut:async(e,t,s)=>(await fetch("".concat(a,"/api/festival/cashout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,sessionToken:t,seedPhrase:s})})).json()}}},e=>{e.O(0,[593,881,736,540,358],()=>e(e.s=1238)),_N_E=e.O()}]);