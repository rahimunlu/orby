(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{1726:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9767).A)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},7966:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var s=a(4540),i=a(6879),l=a(1726),n=a(4422),r=a(9767);let o=(0,r.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),c=(0,r.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var d=function(e){return e.WALLET="WALLET",e.ACTIVITY="ACTIVITY",e.MENU="MENU",e.QR="QR",e}({});let h=[{id:d.QR,icon:l.A,label:"QR",path:"/qr"},{id:d.WALLET,icon:n.A,label:"WALLET",path:"/wallet"},{id:d.ACTIVITY,icon:o,label:"ACTIVITY",path:"/activity"},{id:d.MENU,icon:c,label:"MENU",path:"/menu"}];function p(){let e=(0,i.useRouter)(),t=(0,i.usePathname)(),a="/wallet"===t||"/"===t?d.WALLET:"/activity"===t?d.ACTIVITY:"/menu"===t?d.MENU:"/qr"===t?d.QR:d.WALLET;return(0,s.jsx)("div",{className:"fixed bottom-6 left-0 w-full flex justify-center z-50 pointer-events-none",children:(0,s.jsx)("div",{className:"w-[92%] max-w-md pointer-events-auto animate-fade-in-up delay-400",children:(0,s.jsx)("div",{className:"flex items-center justify-between bg-zinc-950/90 backdrop-blur-xl border border-white/10 rounded-full px-2 py-2 shadow-2xl ring-1 ring-white/5",children:h.map(t=>{let i=a===t.id,l=t.icon;return(0,s.jsxs)("button",{onClick:()=>e.push(t.path),className:"flex items-center gap-2 px-5 py-3 rounded-full transition-all duration-300 ".concat(i?"bg-orby text-white shadow-[0_0_15px_rgba(40,80,255,0.5)] font-bold":"text-zinc-500 hover:text-white"),children:[(0,s.jsx)(l,{size:20,strokeWidth:i?2.5:2}),i&&(0,s.jsx)("span",{className:"text-xs tracking-wider font-sans",children:t.label})]},t.id)})})})})}function u(e){let{children:t,hideNav:a=!1,bgClass:i="bg-orby-dark"}=e;return(0,s.jsxs)("div",{className:"relative min-h-screen w-full overflow-hidden flex flex-col text-white ".concat(i),children:[(0,s.jsx)("div",{className:"flex-1 overflow-y-auto pb-24 no-scrollbar",children:t}),!a&&(0,s.jsx)(p,{})]})}},8869:(e,t,a)=>{"use strict";a.d(t,{qK:()=>l});var s=a(5653);a(4101).env.NEXT_PUBLIC_SEPOLIA_RPC_URL;let i="orby_seed",l={createWallet(){let e=s.we();return localStorage.setItem(i,e),e},hasWallet:()=>!!localStorage.getItem(i),getSeedPhrase:()=>localStorage.getItem(i),validateMnemonic:e=>s.JB(e),isInitialized(){return this.hasWallet()},clearWallet(){localStorage.removeItem(i)}}},9270:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(4540),i=a(9952),l=a(6879),n=a(9573);let r={get:()=>{let e=localStorage.getItem("orby_session");return e?JSON.parse(e):null}};var o=a(8869),c=a(2787),d=a(6467);let h=(0,a(9767).A)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var p=a(7966);function u(){let e=(0,l.useRouter)(),[t,a]=(0,i.useState)(null),[u,x]=(0,i.useState)(null),[m,f]=(0,i.useState)(!1),[b,y]=(0,i.useState)(!1),[v,g]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(()=>{if(!o.qK.hasWallet())return e.push("/login");g(!1)})()},[e]);let w=async()=>{f(!0);try{let e=r.get(),t=(null==e?void 0:e.userId)||"user123",s=(null==e?void 0:e.sessionToken)||"sessionToken",[i,l]=await Promise.all([n.F.getBalances(t,s),n.F.getFestival()]);a(i),x(l)}catch(e){console.error(e)}finally{f(!1)}};(0,i.useEffect)(()=>{v||w()},[v]);let j=async()=>{if(!b){y(!0);try{let e=r.get();await n.F.topUp({userId:(null==e?void 0:e.userId)||"user123",sessionToken:(null==e?void 0:e.sessionToken)||"sessionToken",amountUsdt:10}),await w(),k("Top up successful!")}catch(e){console.error("Topup failed",e)}finally{y(!1)}}},k=e=>{let t=document.createElement("div");t.className="fixed top-6 left-1/2 transform -translate-x-1/2 bg-black/90 backdrop-blur-md text-white px-6 py-4 rounded-2xl border border-white/10 shadow-2xl z-50 font-bold animate-fade-in-down font-display tracking-tight flex items-center gap-3",t.innerHTML='<span class="text-orby">âœ“</span> '.concat(e),document.body.appendChild(t),setTimeout(()=>t.remove(),3e3)},N=t?(parseFloat(t.festivalTokens)/1e18).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"0",T=t?(parseFloat(t.usdt)/1e6).toFixed(2):"0.00";return v?(0,s.jsx)("div",{className:"min-h-screen bg-orby flex items-center justify-center",children:(0,s.jsx)(c.A,{className:"animate-spin text-white",size:32})}):(0,s.jsx)(p.A,{bgClass:"bg-orby",children:(0,s.jsxs)("div",{className:"flex flex-col text-white px-6 pt-6 min-h-[calc(100vh-96px)]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 animate-fade-in",children:[(0,s.jsx)("h1",{className:"text-3xl font-display font-black tracking-tighter lowercase italic",children:"orby"}),(0,s.jsx)("div",{className:"bg-black/20 backdrop-blur-md text-white px-4 py-1.5 rounded-full font-bold text-sm border border-white/10 tracking-wide font-sans",children:"PTS 0"})]}),(0,s.jsx)("div",{className:"flex-1 flex flex-col justify-center items-center pb-12",children:(0,s.jsxs)("div",{className:"text-center transform -translate-y-8 animate-scale-in",children:[(0,s.jsxs)("div",{className:"relative inline-block",children:[(0,s.jsxs)("div",{className:"text-[100px] sm:text-[120px] leading-none font-display font-black tracking-tighter mb-2 drop-shadow-sm",children:["$",N]}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-white blur-[100px] opacity-20 pointer-events-none rounded-full"})]}),(0,s.jsx)("div",{className:"flex flex-col gap-2 items-center opacity-90 font-medium text-lg font-sans animate-fade-in-up delay-100",children:m?(0,s.jsx)(c.A,{className:"animate-spin mb-2"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"tracking-widest uppercase text-xs font-bold text-white/80 mb-1",children:[u?u.symbol:"TOKENS"," Available"]}),(0,s.jsxs)("span",{className:"text-xs bg-black/20 backdrop-blur-md px-4 py-1.5 rounded-full font-bold text-white/90 border border-white/10 shadow-sm",children:["USDT Balance: $",T]})]})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-auto mb-4 w-full",children:[(0,s.jsxs)("button",{onClick:j,disabled:b,className:"bg-black hover:bg-zinc-900 active:scale-95 transition-all duration-300 text-white rounded-[32px] p-6 h-48 flex flex-col justify-between relative overflow-hidden group shadow-lg animate-fade-in-up delay-200 border border-white/5",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-5 group-hover:rotate-90 transition-transform duration-300",children:(0,s.jsx)(d.A,{size:32,className:"text-orby"})}),(0,s.jsx)("div",{className:"mt-auto relative z-10",children:(0,s.jsx)("span",{className:"text-3xl font-display font-bold tracking-tight block group-hover:translate-x-1 transition-transform",children:b?"ADDING...":"DEPOSIT"})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),(0,s.jsxs)("button",{className:"bg-white/10 backdrop-blur-md border border-white/20 hover:bg-white/20 active:scale-95 transition-all duration-300 text-white rounded-[32px] p-6 h-48 flex flex-col justify-between relative overflow-hidden group animate-fade-in-up delay-300",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-5 group-hover:-translate-y-1 group-hover:translate-x-1 transition-transform duration-300",children:(0,s.jsx)(h,{size:32,strokeWidth:2.5,className:"text-white opacity-80"})}),(0,s.jsx)("div",{className:"mt-auto relative z-10",children:(0,s.jsx)("span",{className:"text-3xl font-display font-bold tracking-tight block group-hover:translate-x-1 transition-transform",children:"REQUEST"})})]})]})]})})}},9573:(e,t,a)=>{"use strict";a.d(t,{F:()=>i});let s=a(4101).env.NEXT_PUBLIC_API_URL||"",i={getFestival:async()=>{let e=await fetch("".concat(s,"/api/admin/festival"));return e.ok?e.json():null},createFestival:async e=>(await fetch("".concat(s,"/api/admin/create-festival"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),join:async e=>(await fetch("".concat(s,"/api/festival/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nickname:e})})).json(),getBalances:async(e,t)=>(await fetch("".concat(s,"/api/festival/balances?userId=").concat(e,"&sessionToken=").concat(t))).json(),topUp:async e=>(await fetch("".concat(s,"/api/festival/topup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),cashOut:async(e,t)=>(await fetch("".concat(s,"/api/festival/cashout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,sessionToken:t})})).json()}},9856:(e,t,a)=>{Promise.resolve().then(a.bind(a,9270))}},e=>{e.O(0,[366,736,540,358],()=>e(e.s=9856)),_N_E=e.O()}]);